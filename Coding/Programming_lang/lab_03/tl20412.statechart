events
    motionDetected MOTION_DETECTED
    motionStopped MOTION_STOPPED
    batteryCritical BATTERY_CRITICAL
    batteryOk BATTERY_OK
    timerExpired TIMER_EXPIRED
end

commands
    startScan START_SCAN
    stopScan STOP_SCAN
    turnOnLight TURN_ON_LIGHT
    turnOffLight TURN_OFF_LIGHT
    turnOnCamera TURN_ON_CAMERA
    turnOffCamera TURN_OFF_CAMERA
    trackMotion TRACK_MOTION
    startTransmission START_TRANSMISSION
    stopTransmission STOP_TRANSMISSION
    enterStandby ENTER_STANDBY
    exitStandby EXIT_STANDBY
    startTimer START_TIMER
end

state scanning
    actions {startScan}
    motionDetected => tracking
    batteryCritical => standby
end

state tracking
    actions {turnOnLight turnOnCamera trackMotion startTransmission}
    motionStopped => delayBeforeStop
    batteryCritical => standby
    motionDetected => tracking
end

state delayBeforeStop
    actions {startTimer}
    timerExpired => stopping
    batteryCritical => standby
end

state stopping
    actions {stopTransmission turnOffCamera turnOffLight}
    batteryOk => scanning
    batteryCritical => standby
end

state standby
    actions {enterStandby}
    batteryOk => scanning
    batteryCritical => standby
end

